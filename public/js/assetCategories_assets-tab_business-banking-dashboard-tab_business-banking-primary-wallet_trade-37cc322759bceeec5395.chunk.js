(("undefined"!==typeof self?self:this).webpackJsonp=("undefined"!==typeof self?self:this).webpackJsonp||[]).push([[33],{"5sUf":function(e,t,a){"use strict";var n=a("mXGw");t.a=function(e){return Object(n.useCallback)(t=>new Promise((a,n)=>{e(Object.assign({},t,{onCompleted:(e,t)=>{a({response:e,errors:t})},onError:e=>{n(e)}}))}),[e])}},CtzL:function(e,t,a){"use strict";a.d(t,"a",(function(){return M}));var n=a("5n0U"),s=a("mXGw"),l=a.n(s),i=a("hWgQ"),o=a("gN02"),c=a("oNR1"),r=a("vp/C"),u=a("i5CW"),d=a("mJLJ"),g=a("PS9E"),m=a("iNnr"),b=a("/Rdd"),f=a("hOK7"),y=a("Nq15"),p=a("TDwA");const k={platform:"web",componentType:p.ComponentType.button};function h({assetCode:e,filterName:t,filterType:a,quickActionType:n}){return Object(p.useEventLogger)("quick_action_menu_button",Object.assign({action:p.ActionType.render,loggingId:"781b2e63-7a6b-4071-a97f-19a55e9d09b7",asset:e,filterName:t,filterType:a,quickActionType:n},k))}function v({assetCode:e,filterName:t,filterType:a,quickActionType:n}){return Object(p.useEventLogger)("quick_action_menu_button",Object.assign({action:p.ActionType.click,loggingId:"781b2e63-7a6b-4071-a97f-19a55e9d09b7",asset:e,filterName:t,filterType:a,quickActionType:n},k))}const O="quickActions",j=Object(i.c)({viewMyWallet:{id:"AssetTableContextMenu.viewMyWallet",defaultMessage:"View my wallet"},buy:{id:"AssetTableContextMenu.buy",defaultMessage:"Buy {assetName}"},sell:{id:"AssetTableContextMenu.sell",defaultMessage:"Sell {assetName}"},convert:{id:"AssetTableContextMenu.convert",defaultMessage:"Convert {assetName}"},send:{id:"AssetTableContextMenu.send",defaultMessage:"Send {assetName}"},receive:{id:"AssetTableContextMenu.receive",defaultMessage:"Receive {assetName}"},viewAsset:{id:"AssetTableContextMenu.viewAsset",defaultMessage:"View asset"},addToWatchlist:{id:"AssetTableContextMenu.addToWatchlist",defaultMessage:"Add to watchlist"},removeFromWatchlist:{id:"AssetTableContextMenu.removeFromWatchlist",defaultMessage:"Remove from watchlist"},addCash:{id:"AssetTableContextMenu.addCash",defaultMessage:"Add cash"},cashOut:{id:"AssetTableContextMenu.cashOut",defaultMessage:"Cash out"}}),A=({onVisible:e,onClick:t,startIconName:a,text:s})=>Object(n.a)(r.a,{onVisibleOnce:e},void 0,Object(n.a)("div",{},void 0,Object(n.a)(d.b,{text:s,startIconName:a,onClick:t})));function T({assetId:e="",assetName:t,accountId:a,accountBalance:s,filterType:i,filterName:r}){const{formatMessage:d}=Object(o.a)(),{showModal:g}=Object(f.a)(),m={assetCode:t,filterType:i,filterName:r},p=h(Object.assign({},m,{quickActionType:"wallet"})),k=v(Object.assign({},m,{quickActionType:"wallet"})),T=h(Object.assign({},m,{quickActionType:"buy"})),w=v(Object.assign({},m,{quickActionType:"buy"})),L=h(Object.assign({},m,{quickActionType:"sell"})),C=v(Object.assign({},m,{quickActionType:"sell"})),M=h(Object.assign({},m,{quickActionType:"convert"})),F=v(Object.assign({},m,{quickActionType:"convert"})),S=h(Object.assign({},m,{quickActionType:"send"})),K=v(Object.assign({},m,{quickActionType:"send"})),N=h(Object.assign({},m,{quickActionType:"receive"})),V=v(Object.assign({},m,{quickActionType:"receive"})),x=Object(c.h)(),q=0===s;return l.a.createElement(l.a.Fragment,null,a&&Object(n.a)(A,{text:d(j.viewMyWallet),startIconName:"wallet",onClick:()=>{k(),x.push({pathname:Object(y.b)(a),state:{context:O}})},onVisible:()=>p()}),Object(n.a)(A,{text:d(j.buy,{assetName:t}),startIconName:"add",onClick:()=>{w(),g(Object(n.a)(u.a,{assetId:e,assetCode:t,eventContext:O}))},onVisible:()=>T()}),!q&&l.a.createElement(l.a.Fragment,null,Object(n.a)(A,{text:d(j.sell,{assetName:t}),startIconName:"minus",onClick:()=>{C(),g(Object(n.a)(u.a,{assetId:e,assetCode:t,initialActiveTab:"sell",eventContext:O}))},onVisible:()=>L()}),Object(n.a)(A,{text:d(j.convert,{assetName:t}),startIconName:"convert",onClick:()=>{F(),g(Object(n.a)(u.a,{assetId:e,assetCode:t,initialActiveTab:"convert",eventContext:O}))},onVisible:()=>M()}),Object(n.a)(A,{text:d(j.send,{assetName:t}),startIconName:"arrowUp",onClick:()=>{K(),g(Object(n.a)(b.a,{accountId:a,entryPoint:O}))},onVisible:()=>S()})),Object(n.a)(A,{text:d(j.receive,{assetName:t}),startIconName:"arrowDown",onClick:()=>{V(),g(Object(n.a)(b.a,{accountId:a,defaultTab:"receive",entryPoint:O}))},onVisible:()=>N()}))}function w({assetId:e,assetName:t,assetSlug:a,watchlistToggle:s,isWatched:i,filterType:r,filterName:u}){const{formatMessage:d}=Object(o.a)(),g=Object(c.h)(),m={assetCode:t,filterType:r,filterName:u},b=h(Object.assign({},m,{quickActionType:"asset"})),f=v(Object.assign({},m,{quickActionType:"asset"})),p=h(Object.assign({},m,{quickActionType:"watchlist_add"})),k=v(Object.assign({},m,{quickActionType:"watchlist_add"})),T=h(Object.assign({},m,{quickActionType:"watchlist_remove"})),w=v(Object.assign({},m,{quickActionType:"watchlist_remove"}));return l.a.createElement(l.a.Fragment,null,a&&Object(n.a)(A,{text:d(j.viewAsset,{assetName:t}),startIconName:"wallet",onClick:()=>{f(),g.push({pathname:Object(y.c)(a),state:{context:O}})},onVisible:()=>b()}),e&&Object(n.a)(A,{text:d(i?j.removeFromWatchlist:j.addToWatchlist,{assetName:t}),startIconName:i?"minus":"add",onClick:()=>{i?w():k(),s&&s()},onVisible:()=>{i?T():p()}}))}function L({account:e,accountId:t,accountBalance:a,assetName:s,filterType:i,filterName:r}){const{formatMessage:u}=Object(o.a)(),{showModal:d}=Object(f.a)(),m=Object(c.h)(),b=0===a,p={assetCode:s,filterType:i,filterName:r},k=h(Object.assign({},p,{quickActionType:"add_cash"})),T=v(Object.assign({},p,{quickActionType:"add_cash"})),w=h(Object.assign({},p,{quickActionType:"cash_out"})),L=v(Object.assign({},p,{quickActionType:"cash_out"}));return l.a.createElement(l.a.Fragment,null,Object(n.a)(A,{text:u(j.addCash),startIconName:"add",onClick:()=>{T(),e&&d(Object(n.a)(g.a,{account:e,close:()=>{}}))},onVisible:()=>k()}),!b&&t&&Object(n.a)(A,{text:u(j.cashOut),startIconName:"minus",onClick:()=>{L(),m.push({pathname:Object(y.b)(null===e||void 0===e?void 0:e.id),state:{context:O}})},onVisible:()=>w()}))}function C(e){const{position:t,isTradable:a,isFiat:s=!1}=e;return Object(n.a)(m.a,{fallback:()=>null,onCatch:e=>{Bugsnag.notify(e,{metaData:{context:"AssetTableContextMenu"}})}},void 0,Object(n.a)(d.c,{iconName:"more",spacing:0,position:t,fixedWidth:!a},void 0,s?l.a.createElement(L,Object.assign({},e)):a?l.a.createElement(T,Object.assign({},e)):l.a.createElement(w,Object.assign({},e))))}var M=Object(s.memo)(C)},"Gj/a":function(e,t,a){"use strict";var n=a("mXGw");var s=function(){function e(){t.lastCallID=0,t.lastOngoingPromiseData=void 0,t.promise=Promise.resolve()}const t={};return e(),function(a){function n(e){return!l()&&function(){const e=t.lastOngoingPromiseData;return Boolean(void 0===e||e!==a.data)}()?(t.lastOngoingPromiseData=a.data,a.fn()):e}function s(t){return a=>new Promise((n,s)=>{if(!l()){e();("resolve"===t?n:s)(a)}})}function l(){return t.lastCallID!==i}t.lastCallID+=1;const i=t.lastCallID;return function(){const e=t.promise.then(n);return t.promise=e.catch(()=>{}),e.then(s("resolve")).catch(s("reject"))}()}},l=a("p4CU");var i=e=>{const t=Object(l.a)(()=>s()),a=Object(n.useRef)(e);return Object(n.useEffect)(()=>{a.current=e},[e]),Object(n.useCallback)((e,...n)=>t({fn:()=>a.current(e,...n),data:void 0!==e?JSON.stringify(e):void 0}),[a,t])};t.a=i},Vxsc:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a("hWgQ");const s=Object(n.c)({oneHour:{id:"PeriodStore.oneHour",defaultMessage:"1h"},oneHourLong:{id:"PeriodStore.oneHourLong",defaultMessage:"1 hour"},oneDay:{id:"PeriodStore.oneDay",defaultMessage:"1d"},oneDayLong:{id:"PeriodStore.oneDayLong",defaultMessage:"1 day"},oneWeek:{id:"PeriodStore.oneWeek",defaultMessage:"1w"},oneWeekLong:{id:"PeriodStore.oneWeekLong",defaultMessage:"1 week"},oneMonth:{id:"PeriodStore.oneMonth",defaultMessage:"1m"},oneMonthLong:{id:"PeriodStore.oneMonthLong",defaultMessage:"1 month"},oneYear:{id:"PeriodStore.oneYear",defaultMessage:"1y"},oneYearLong:{id:"PeriodStore.oneYearLong",defaultMessage:"1 year"},all:{id:"PeriodStore.all",defaultMessage:"all"}})},bL6m:function(e,t,a){"use strict";var n=a("mXGw"),s=a("DDg1");t.a=()=>{const e=Object(s.a)("nov_2021_web_asset_quick_actions","treatment");return Object(n.useMemo)(()=>e,[e])}},cpZL:function(e,t,a){"use strict";a.r(t);const n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"watchListFragment",selections:[{alias:null,args:null,concreteType:"ViewerAssetList",kind:"LinkedField",name:"watchedAssetsV2",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerAsset",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"Asset",kind:"LinkedField",name:"asset",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uuid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"listed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"symbol",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Viewer",abstractKey:null,hash:"d3a885fc01d8c4d06a8ac548ace0e2de"};t.default=n},l6A1:function(e,t,a){"use strict";var n,s,l=a("mXGw"),i=a("nms+"),o=a("5sUf"),c=a("Gj/a"),r=(a("oN8/"),a("ZGuR"));const u=e=>t=>{var a,n;const s=null===(a=t.get("client:root"))||void 0===a||null===(n=a.getLinkedRecord("viewer"))||void 0===n?void 0:n.getLinkedRecord("watchedAssetsV2"),l=null===s||void 0===s?void 0:s.getLinkedRecords("nodes");if(!s||!l)return;const i=null===l||void 0===l?void 0:l.filter(t=>{const a=null===t||void 0===t?void 0:t.getLinkedRecord("asset");return(null===a||void 0===a?void 0:a.getValue("uuid"))!==e});s.setLinkedRecords(i,"nodes")};t.a=function({watchList:e,assetUuid:t,assetSymbol:d,context:g}){const{isWatched:m,setIsWatched:b}=function(e,t){const a=Object(l.useMemo)(()=>e.some(e=>e.uuid===t),[e,t]),[n,s]=Object(l.useState)(a);return Object(l.useEffect)(()=>{s(a)},[t]),{isWatched:n,setIsWatched:s}}(e,t),f=Object(l.useMemo)(()=>({currency:d,context:g}),[g,d]),y=Object(i.a)("asset_tapped_watch",f),p=Object(i.a)("asset_tapped_unwatch",f),[k]=Object(r.useMutation)(void 0!==n?n:n=a("nuZP")),[h]=Object(r.useMutation)(void 0!==s?s:s=a("zAVA")),v=Object(o.a)(k),O=Object(o.a)(h),j=Object(l.useCallback)(()=>v({variables:{input:{assetUuid:t}}}).catch(e=>{throw Bugsnag.notify(e),e}),[v,t]),A=Object(l.useCallback)(()=>O({variables:{input:{assetUuid:t}},updater:u(t),optimisticUpdater:u(t)}).catch(e=>{throw Bugsnag.notify(e),e}),[O,t]),T=Object(c.a)(Object(l.useCallback)(e=>e?j():A(),[j,A]));return{toggle:Object(l.useCallback)(()=>{b(!m),m?p():y(),T(!m)},[b,m,T,y,p]),isWatched:m}}},nuZP:function(e,t,a){"use strict";a.r(t);const n=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{kind:"Variable",name:"input",variableName:"input"}],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useWatchListTogglerAddMutation",selections:[{alias:null,args:t,concreteType:"AddWatchedAssetPayload",kind:"LinkedField",name:"addWatchedAsset",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"watchListFragment"}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useWatchListTogglerAddMutation",selections:[{alias:null,args:t,concreteType:"AddWatchedAssetPayload",kind:"LinkedField",name:"addWatchedAsset",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerAssetList",kind:"LinkedField",name:"watchedAssetsV2",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerAsset",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"Asset",kind:"LinkedField",name:"asset",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"uuid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"listed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"symbol",storageKey:null}],storageKey:null},a],storageKey:null}],storageKey:null},a],storageKey:null}],storageKey:null}]},params:{id:"a7974bbbc21e842757940deb060028793cf57257c86fde557bbf40cc87bcc85b",metadata:{},name:"useWatchListTogglerAddMutation",operationKind:"mutation",text:null}}}();n.hash="fc579d3cc1cdd398ed819618829c37af",t.default=n},sfkd:function(e,t,a){"use strict";a.r(t);const n=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,concreteType:"Asset",kind:"LinkedField",name:"asset",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"uuid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"listed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"symbol",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"watchListQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerAssetList",kind:"LinkedField",name:"watchedAssetsV2",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerAsset",kind:"LinkedField",name:"nodes",plural:!0,selections:[t],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"watchListQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerAssetList",kind:"LinkedField",name:"watchedAssetsV2",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerAsset",kind:"LinkedField",name:"nodes",plural:!0,selections:[t,e],storageKey:null}],storageKey:null},e],storageKey:null}]},params:{id:"2da475a66aa8c0ba8d5d0deb87b8ecdf520e68ac87f02c842c2a9c3c8231f049",metadata:{},name:"watchListQuery",operationKind:"query",text:null}}}();n.hash="13de208ad4308bdd9afabac881c22d5a",t.default=n},t9iV:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return v}));var n,s,l=a("mXGw"),i=a("4aSu"),o=a("81zz"),c=a("oN8/");void 0!==n||(n=a("cpZL"));var r=void 0!==s?s:s=a("sfkd");function u(){var e;const t=Object(c.useLazyLoadQuery)(r,{}),a=Object(i.a)({name:"watchedAssets",data:null===(e=t.viewer.watchedAssetsV2)||void 0===e?void 0:e.nodes}),n=Object(l.useMemo)(()=>a.map(e=>null===e||void 0===e?void 0:e.asset),[a]);return Object(o.a)(n)}var d=a("+I+c"),g=a("XWvS"),m=a("YPbV");class b extends g.a{constructor(...e){super(...e),this.id="",this.base="",this.currency="",this.marketCap="",this.name="",this.percentChange=0,this.prices=[],this.unitPriceScale=2,this.latest=void 0,this.latestPrice=m.a,this.resolution="day"}pk(){return[this.id,this.resolution].join(",")}get symbol(){return this.base}static url(e){const t=e||{},{id:a}=t,n=Object(d.a)(t,["id"]);if(!a||!(null===n||void 0===n?void 0:n.base)||!(null===n||void 0===n?void 0:n.resolution))throw new Error("AssetSummaryResource url requires id, base and resolution params");const s=new URLSearchParams(n).toString();return`${this.urlRoot}/${a}?${s}`}static detailShape(){const e=super.detailShape();return Object.assign({},e,{fetch:e=>super.fetch("get",this.url(e)).then(t=>{if(t&&t.data)return{data:Object.assign({},t.data,{resolution:e.resolution})}})})}static listUrl(e){if(!(null===e||void 0===e?void 0:e.base)||!(null===e||void 0===e?void 0:e.resolution))throw new Error("AssetSummaryResource listUrl requires base and resolution params");return super.listUrl(e)}static listShape(){const e=super.listShape();return Object.assign({},e,{fetch:(e,t)=>super.fetch("get",this.listUrl(e),t).then(t=>{if(t&&t.data)return{data:t.data.map(t=>Object.assign({},t,{resolution:e.resolution}))}})})}static get key(){return"AssetSummaryResource"}}b.schema={latestPrice:m.b},b.urlRoot="/v2/assets/summary";var f=a("4gc5");var y=a("RPKv"),p=a("2YLE"),k=a("SPtF");var h=function(e,t=null){var a;const n=Object(l.useContext)(y.a.StateContext),[s,i]=Object(p.a)(e,t,n);return Object(k.a)(e,i&&!(null===(a=e.options)||void 0===a?void 0:a.invalidIfStale)?null:t),s};function v(e){const{data:t}=h(b.detailShape(),function(e){const{nativeCurrency:t}=Object(f.a)();return{id:e,base:t,resolution:"day",include_prices:!0}}(e.uuid));return Object(l.useMemo)(()=>{if(t)return Object.assign({},e,t,{id:e.uuid})},[e,t])}},zAVA:function(e,t,a){"use strict";a.r(t);const n=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"RemoveWatchedAssetPayload",kind:"LinkedField",name:"removeWatchedAsset",plural:!1,selections:[{alias:null,args:null,concreteType:"Asset",kind:"LinkedField",name:"asset",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useWatchListTogglerRemoveMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useWatchListTogglerRemoveMutation",selections:t},params:{id:"ebf362573f071bda9b1fa7cb7d98b367952e7366d3e907719ba2c813463e7f3f",metadata:{},name:"useWatchListTogglerRemoveMutation",operationKind:"mutation",text:null}}}();n.hash="fe55f87f8bac7ac9c8ab4374a0989831",t.default=n}}]);
//# sourceMappingURL=assetCategories~assets-tab~business-banking-dashboard-tab~business-banking-primary-wallet~trade-37cc322759bceeec5395.chunk.js.map